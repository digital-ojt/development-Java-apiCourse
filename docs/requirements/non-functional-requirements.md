# ドローン在庫管理システム 非機能要件書

## 📋 文書概要

| 項目       | 内容                                  |
| ---------- | ------------------------------------- |
| 文書名     | ドローン在庫管理システム 非機能要件書 |
| 作成日     | 2024 年 12 月 15 日                   |
| 最終更新日 | 2024 年 12 月 15 日                   |
| バージョン | 1.0.0                                 |
| 作成者     | Development Team                      |
| 承認者     | Project Manager                       |

## 🎯 対象

- システムアーキテクト
- インフラエンジニア
- 開発リーダー
- 品質保証エンジニア
- 運用チーム

---

## 1. 性能要件（Performance Requirements）

### 1.1 応答時間要件

#### 1.1.1 Web 画面表示

- **画面初期表示**: 3 秒以内
- **画面遷移**: 2 秒以内
- **検索結果表示**: 5 秒以内（1,000 件以下）
- **データ更新処理**: 3 秒以内

#### 1.1.2 API 応答時間

- **認証 API**: 1 秒以内
- **一覧取得 API**: 2 秒以内（100 件以下）
- **詳細取得 API**: 1 秒以内
- **登録・更新 API**: 3 秒以内
- **削除 API**: 2 秒以内

#### 1.1.3 バッチ処理

- **在庫警告バッチ**: 10 分以内（全在庫チェック）
- **レポート生成バッチ**: 30 分以内（月次レポート）
- **データバックアップ**: 60 分以内（フルバックアップ）

### 1.2 スループット要件

#### 1.2.1 同時接続数

- **最大同時接続ユーザー数**: 50 ユーザー
- **最大同時 API 呼び出し**: 200 リクエスト/分
- **ピーク時処理能力**: 通常時の 150%

#### 1.2.2 データ処理量

- **最大登録件数**: 10,000 件/日（在庫更新）
- **最大検索処理**: 1,000 件/回
- **データベースアクセス**: 500 クエリ/分

### 1.3 リソース使用量

#### 1.3.1 サーバーリソース

- **CPU 使用率**: 平均 60%以下、ピーク 80%以下
- **メモリ使用率**: 平均 70%以下、ピーク 85%以下
- **ディスク使用量**: 年間増加率 10GB 以下

#### 1.3.2 ネットワーク

- **帯域使用量**: 100Mbps 以下
- **データ転送量**: 1GB/日以下

---

## 2. 可用性要件（Availability Requirements）

### 2.1 稼働率要件

#### 2.1.1 システム稼働率

- **目標稼働率**: 99.5%以上（年間）
- **営業時間内稼働率**: 99.9%以上（平日 8:00-18:00）
- **最大連続ダウンタイム**: 4 時間以内

#### 2.1.2 計画停止

- **定期メンテナンス**: 月 1 回、2 時間以内（営業時間外）
- **システム更新**: 年 4 回、4 時間以内（営業時間外）
- **緊急メンテナンス**: 24 時間以内に実施可能

### 2.2 障害回復要件

#### 2.2.1 障害検知

- **監視間隔**: 5 分毎
- **障害通知**: 検知から 5 分以内
- **エスカレーション**: 30 分以内に責任者へ通知

#### 2.2.2 回復時間

- **軽微な障害**: 30 分以内に回復
- **重大な障害**: 4 時間以内に回復
- **システム全停止**: 24 時間以内に回復

### 2.3 災害対策

#### 2.3.1 バックアップ

- **データバックアップ**: 日次フルバックアップ
- **増分バックアップ**: 4 時間毎
- **バックアップ保持期間**: 30 日間
- **バックアップ場所**: オフサイト保管

#### 2.3.2 災害復旧

- **復旧時間目標（RTO）**: 24 時間以内
- **復旧ポイント目標（RPO）**: 4 時間以内
- **災害復旧テスト**: 年 2 回実施

---

## 3. 拡張性要件（Scalability Requirements）

### 3.1 処理能力の拡張

#### 3.1.1 垂直スケーリング

- **CPU 拡張**: 最大 16 コアまで対応
- **メモリ拡張**: 最大 64GB まで対応
- **ストレージ拡張**: 最大 2TB まで対応

#### 3.1.2 水平スケーリング

- **アプリケーションサーバー**: ロードバランサーによる負荷分散対応
- **データベース**: リードレプリカによる読み取り性能向上
- **API**: マイクロサービス化によるスケールアウト対応

### 3.2 データ拡張性

#### 3.2.1 データ増加対応

- **部品データ**: 100,000 件まで対応
- **在庫履歴**: 1,000,000 件まで対応
- **操作ログ**: 10,000,000 件まで対応

#### 3.2.2 パーティショニング

- **履歴テーブル**: 月単位でのパーティション分割
- **ログテーブル**: 日単位でのパーティション分割
- **アーカイブ**: 3 年経過データの自動アーカイブ

---

## 4. セキュリティ要件（Security Requirements）

### 4.1 認証・認可

#### 4.1.1 認証方式

- **認証方式**: JWT（JSON Web Token）
- **トークン有効期限**: 24 時間
- **パスワード要件**: 8 文字以上、英数字・記号混在
- **アカウントロック**: ログイン失敗 5 回で 30 分間ロック

#### 4.1.2 認可制御

- **役割ベースアクセス制御（RBAC）**: 管理者・オペレーター・閲覧者
- **API アクセス制御**: 認証されたユーザーのみアクセス可能
- **データアクセス制御**: 操作権限に応じたデータアクセス制限

### 4.2 データ保護

#### 4.2.1 データ暗号化

- **通信暗号化**: HTTPS/TLS 1.2 以上
- **パスワード暗号化**: BCrypt によるハッシュ化
- **データベース暗号化**: 機密データの暗号化保存

#### 4.2.2 データマスキング

- **個人情報**: ログ出力時のマスキング処理
- **認証情報**: パスワード等の機密情報の非表示
- **監査ログ**: 機密情報の除外・マスキング

### 4.3 セキュリティ監視

#### 4.3.1 アクセスログ

- **API アクセスログ**: 全 API 呼び出しの記録
- **認証ログ**: ログイン・ログアウトの記録
- **操作ログ**: データ変更操作の記録

#### 4.3.2 セキュリティ監視

- **不正アクセス検知**: 異常なアクセスパターンの検知
- **ブルートフォース攻撃対策**: 連続ログイン失敗の監視
- **SQL インジェクション対策**: 入力値の検証・エスケープ処理

---

## 5. 保守性要件（Maintainability Requirements）

### 5.1 運用監視

#### 5.1.1 システム監視

- **リソース監視**: CPU、メモリ、ディスク、ネットワーク
- **アプリケーション監視**: プロセス稼働状況、応答時間
- **データベース監視**: 接続数、クエリ性能、デッドロック

#### 5.1.2 ログ管理

- **アプリケーションログ**: INFO、WARN、ERROR レベル
- **アクセスログ**: HTTP リクエスト・レスポンス
- **エラーログ**: 例外・エラー情報の詳細記録
- **ログ保持期間**: 3 ヶ月間

### 5.2 保守作業

#### 5.2.1 システム更新

- **アプリケーション更新**: ダウンタイム最小化（Blue-Green Deploy）
- **データベース更新**: スキーマ変更の段階的適用
- **設定変更**: 設定ファイルの外部化・動的変更対応

#### 5.2.2 メンテナンス性

- **コードの可読性**: コーディング規約の準拠
- **ドキュメント**: API 仕様書・運用手順書の整備
- **テスタビリティ**: 単体テスト・結合テスト・E2E テストの自動化

---

## 6. 互換性要件（Compatibility Requirements）

### 6.1 ブラウザ互換性

#### 6.1.1 対応ブラウザ

- **Chrome**: 最新版から 2 バージョン前まで
- **Firefox**: 最新版から 2 バージョン前まで
- **Microsoft Edge**: 最新版から 2 バージョン前まで
- **Safari**: 最新版から 1 バージョン前まで（参考対応）

#### 6.1.2 JavaScript 対応

- **ECMAScript**: ES2018 以上
- **ポリフィル**: 古いブラウザへの対応は限定的

### 6.2 システム間連携

#### 6.2.1 API 互換性

- **RESTful API**: HTTP/1.1 準拠
- **データ形式**: JSON 形式
- **文字エンコーディング**: UTF-8

#### 6.2.2 将来拡張

- **外部システム連携**: ERP、SCM システムとの連携準備
- **モバイルアプリ**: 将来的なモバイルアプリ対応
- **クラウド移行**: クラウド環境への移行対応

---

## 7. 信頼性要件（Reliability Requirements）

### 7.1 エラーハンドリング

#### 7.1.1 例外処理

- **システム例外**: グローバル例外ハンドラーによる統一処理
- **業務例外**: ユーザーフレンドリーなエラーメッセージ
- **入力値エラー**: 詳細なバリデーションエラー情報

#### 7.1.2 エラー復旧

- **自動復旧**: 一時的な障害からの自動復旧
- **ロールバック**: データ更新失敗時の自動ロールバック
- **リトライ処理**: 外部システム連携時のリトライ機能

### 7.2 データ整合性

#### 7.2.1 トランザクション管理

- **ACID 特性**: 原子性、一貫性、独立性、永続性の保証
- **分散トランザクション**: 複数テーブル更新時の整合性保証
- **デッドロック対応**: デッドロック検出・回避処理

#### 7.2.2 データ検証

- **入力値検証**: フロントエンド・バックエンド双方での検証
- **業務ルール検証**: ビジネスロジック整合性チェック
- **参照整合性**: 外部キー制約による整合性保証

---

## 8. ユーザビリティ要件（Usability Requirements）

### 8.1 操作性

#### 8.1.1 ユーザーインターフェース

- **直感的操作**: 3 クリック以内での主要操作完了
- **操作ガイド**: 初回利用時のチュートリアル表示
- **ヘルプ機能**: 各画面でのコンテキストヘルプ

#### 8.1.2 レスポンシブデザイン

- **デスクトップ**: 1920x1080 解像度での最適表示
- **タブレット**: 1024x768 解像度対応
- **スマートフォン**: 375x667 解像度対応

### 8.2 アクセシビリティ

#### 8.2.1 ユニバーサルデザイン

- **色覚対応**: カラーユニバーサルデザイン対応
- **フォントサイズ**: 可変フォントサイズ対応
- **キーボード操作**: マウスを使わない操作対応

#### 8.2.2 多言語対応

- **基本対応**: 日本語
- **将来対応**: 英語、中国語（検討事項）

---

## 9. 法的・規制要件（Legal and Regulatory Requirements）

### 9.1 コンプライアンス

#### 9.1.1 個人情報保護

- **個人情報保護法**: 管理者情報の適切な管理
- **データ最小化**: 必要最小限の個人情報のみ収集
- **削除権**: 退職者情報の適切な削除

#### 9.1.2 監査対応

- **操作ログ**: 全ての重要操作の記録
- **変更履歴**: データ変更の完全な履歴管理
- **アクセス記録**: システムアクセスの詳細記録

### 9.2 企業機密保護

#### 9.2.1 情報セキュリティ

- **機密情報管理**: 在庫情報・製造情報の機密保持
- **アクセス制御**: 必要最小限のアクセス権限付与
- **情報漏洩対策**: データ暗号化・ログ監視

---

## 10. 環境要件（Environmental Requirements）

### 10.1 開発環境

#### 10.1.1 開発ツール

- **統合開発環境**: IntelliJ, Eclipse, Visual Studio Code
- **バージョン管理**: Git
- **CI/CD**: GitHub Actions（予定）
- **テストツール**: JUnit 5, Jest

#### 10.1.2 開発プロセス

- **コーディング規約**: Checkstyle, ESLint
- **コードレビュー**: プルリクエストベース
- **テスト自動化**: 単体テスト・結合テスト

### 10.2 運用環境

#### 10.2.1 サーバー環境

- **オペレーティングシステム**: Linux
- **Java Runtime**: OpenJDK 17
- **Web サーバー**: Apache
- **アプリケーションサーバー**: Tomcat

#### 10.2.2 データベース環境

- **データベース**: MySQL 8.0
- **バックアップツール**: mysqldump,

---

## 📋 承認履歴

| バージョン | 更新日     | 更新者           | 承認者          | 更新内容 |
| ---------- | ---------- | ---------------- | --------------- | -------- |
| 1.0.0      | 2024-12-15 | Development Team | Project Manager | 初版作成 |

---

## 📚 関連ドキュメント

- [業務要件書](./business-requirements.md)
- [機能要件書](./functional-requirements.md)

---

**文書終了**
